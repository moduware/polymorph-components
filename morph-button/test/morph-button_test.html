<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>morph-button test</title>

    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../web-component-tester/browser.js"></script>

    <link rel="import" href="../../morph-shared-colors/morph-shared-colors.html">
    <link rel="import" href="../morph-button.html">
  </head>
  <body>

    <test-fixture id="BasicAndroidFixture">
      <template>
        <morph-button platform="android">Android</morph-button>
      </template>
    </test-fixture>

    <test-fixture id="BasicIosFixture">
      <template>
        <morph-button platform="ios">Submit</morph-button>
      </template>
    </test-fixture>

    <test-fixture id="FilledProperty">
      <template>
        <morph-button filled >Login</morph-button>
      </template>
    </test-fixture>

    <script>
      describe('morph-button', function() {
        // testing default Android Buttons properties
        context('Android Default Usual Buttons', function() {
          // declare variable for button in this context only
          let button;

          // Create a test fixture
          beforeEach(function() {
            // assignong button fixture for this context. This will automatically removed on the teardown phase of this test context
            button = fixture('BasicAndroidFixture');

            // mocking showRipple method of our morph-button
            stub('morph-button', {
              showRipple: function() {
                console.log('showRipple was called!');
              }
            });

          });


          it('instantiating the button on android platform with default properties works', function() {
            // test for default color which is blue by default and correct string is added
            let mouseDown = new Event('down');
            button.dispatchEvent(mouseDown);
            // button.cleanUp();
            // Count # of calls to showRipple
            expect(button.showRipple.callCount).to.be.equal(1);
            expect(button.color).to.be.equal('blue');
            expect(button).to.be.ok;
            expect(button.innerHTML).to.be.equal('Android');
          });

        });

        // testing default iOS Buttons properties
        context('iOS Default Usual Buttons', function() {
          // declare button variable in this context or scope
          let button;
          // create test fixture for iOS buttons
          beforeEach(function() {
            // inistanciatong button for this context
            button = fixture('BasicIosFixture');

            // mocking showRipple method of our morph-button
            stub('morph-button', {
              showRipple: function() {
                console.log('showRipple was called!');
              }
            });
          });

          // test proper platform is shown and that correct default colors are applied
          it('Instantiating the button on iOS platform with default properties works', function() {
            // test that correct platform is shown when platform is set in html markup
            expect(button.platform).to.be.equal('ios');
            // test that showRipple is not applied if platform is iOS
            expect(button.showRipple.callCount).to.be.equal(0);
          });
        });

        //testing Filled buttons and changing property
        xcontext('Filled Buttons', function() {
          let button;

          beforeEach(function() {
            // Create a test fixture
            button = fixture('ChangedProperty');
            // setup for color change
            button.setAttribute('color', 'red');
          });

          it('setting a property on the button works', function() {
            // test for color changes and adding attributes works
            expect(button.color).to.be.equal('red');
            expect(button.hasAttribute('filled')).to.be.false;
            // add filled attribute
            button.setAttribute('filled', '');
            expect(button.hasAttribute('filled')).to.be.true;      
          });
        });

        //testing Big buttons and changing property
        xcontext('Big Buttons', function() {
          let button;

          beforeEach(function() {
            // Create a test fixture
            button = fixture('ChangedProperty');
            // setup for Big attribute
            button.setAttribute('big', '');
          });

          it('setting a property on the button works', function() {
            // test for adding big attributes works
            expect(button.hasAttribute('big')).to.be.true;      
          });
        });

        //testing Rounded buttons and changing property
        xcontext('Rounded Buttons', function() {
          let button;

          beforeEach(function() {
            // Create a test fixture
            button = fixture('ChangedProperty');
            // setup for Rounded attribute
            button.setAttribute('rounded', '');
          });

          it('setting a property on the button works', function() {
            // test for adding Rounded attributes works
            expect(button.hasAttribute('rounded')).to.be.true;      
          });
        });

        //testing Raised buttons and changing property
        xcontext('Raised Buttons', function() {
          let button;

          beforeEach(function() {
            // Create a test fixture
            button = fixture('ChangedProperty');
            // setup for Raised attribute
            button.setAttribute('raised', '');
          });

          it('setting a property on the button works', function() {
            // test for adding Raised attributes works
            expect(button.hasAttribute('raised')).to.be.true;      
          });
        });

        //testing Active buttons and changing property
        xcontext('Active Buttons', function() {
          let button;

          beforeEach(function() {
            // Create a test fixture
            button = fixture('ChangedProperty');
            // setup for Active attribute
            button.setAttribute('active', '');
          });

          it('setting a property on the button works', function() {
            // test for adding Active attributes works
            expect(button.hasAttribute('active')).to.be.true;      
          });
        });

        //testing Link buttons and changing property
        xcontext('Link Buttons', function() {
          let button;

          beforeEach(function() {
            // Create a test fixture
            button = fixture('ChangedProperty');
            // setup for Link attribute
            button.setAttribute('link', 'www.google.com');
          });

          it('setting a property on the button works', function() {
            // test for adding Link attributes works
            expect(button.hasAttribute('link')).to.be.true;
            expect(button.link).to.be.equal('www.google.com');    
          });
        });


      });
    </script>

  </body>
</html>
